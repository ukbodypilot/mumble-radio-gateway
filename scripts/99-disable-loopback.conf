## Prevent WirePlumber from managing ALSA loopback devices.
## The mumble-radio-gateway uses these devices directly (FFmpeg + DarkIce).
## WirePlumber opening them in S32_LE format prevents DarkIce from using S16_LE.
##
## Also prevent WirePlumber from managing the AIOC USB audio device.
## WirePlumber claiming it hides it from PyAudio so the gateway cannot find it.
##
## Also exclude C-Media USB Headphone Set so the gateway can open it directly
## for speaker monitoring output (ENABLE_SPEAKER_OUTPUT). Rules that don't match
## any hardware present are silently ignored.

monitor.alsa.rules = [
  {
    matches = [
      { device.name = "~alsa_card.platform-snd_aloop.*" }
    ]
    actions = {
      update-props = {
        device.disabled = true
      }
    }
  }
  {
    matches = [
      { device.name = "~alsa_card.usb-AIOC_*" }
    ]
    actions = {
      update-props = {
        device.disabled = true
      }
    }
  }
  {
    matches = [
      { device.name = "~alsa_card.usb-0d8c_C-Media_USB_Headphone_Set.*" }
    ]
    actions = {
      update-props = {
        device.disabled = true
      }
    }
  }
]
